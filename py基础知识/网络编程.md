# CS架构与BS架构

一个完整的计算机系统是由硬件、操作系统、应用软件三者组成.操作系统:(Operating System，简称OS)是管理和控制计算机硬件与软件资源的计算机程序，是直接运行在“裸机”上的最基本的系统软件，任何其他软件都必须在操作系统的支持下才能运行。

注：计算机(硬件)－>os－>应用软件

互联网的核心就是由一堆协议组成，协议就是标准，比如全世界人通信的标准是英语

**CS架构**
Client <======> Server

客户端软件SEND     服务端软件RECV 
操作系统        操作系统
计算机硬件     计算机硬件 

**BS架构**

Browser <======> Server

# 互联网通信协议

网络 = 物理链接介质+互联网通信协议

英语成为世界上所有人通信的统一标准，如果把计算机看成分布于世界各地的人，那么连接两台计算机之间的internet实际上就是

一系列统一的标准，这些标准称之为互联网协议，互联网的本质就是一系列的协议，总称为‘互联网协议’（Internet Protocol Suite） .

互联网协议的功能：定义计算机如何接入internet，以及接入internet的计算机通信的标准。

## osi协议

互联网协议按照功能不同分为osi七层或tcp/ip五层或tcp/ip四层

主要学习五层：应用层-传输层（段）-网络层（包）-数据链路层（帧）-物理层（位）

协议：规定数据的组织格式
  格式：头部+数据部分
  封包-数据外加头
  拆包-拆掉头获取数据

1. 物理层负责发送电信号
2. 数据链路层由来：单纯的电信号0和1没有任何意义，必须规定电信号多少位一组，每组什么意思，数据链路层的功能：定义了电信号的分组方式
   
ethernet规定

一组电信号构成一个数据包，叫做‘帧’
每一数据帧分成：**报头head** 和 **数据data** 两部分

## mac地址

head中包含的源和目标地址由来：ethernet规定接入internet的设备都必须具备网卡，发送端和接收端的地址便是指网卡的地址，即mac地址

mac（Media Access Control Address）地址：每块网卡出厂时都被烧制上一个世界唯一的mac地址，长度为48位2进制，通常由12位16进制数表示（前六位是厂商编号，后六位是流水线号）

计算机通信基本靠吼（局域网进行广播），即以太网协议的工作方式是广播

局域网就像小黑屋，小黑屋中的人交流要靠吼

## 跨广播域通信

小黑屋和小黑屋怎么进行通信？

每个小黑屋都有一个出口（**网关**），每个网关都有**局域网地址**和**连接公网的地址**

计算机——>广播——>网关——>公网

每一个广播域但凡要连通外部，一定有一个网关棒内部的计算机转发包到公网

必须找出一种方法来区分哪些计算机属于同一广播域，哪些不是，如果是就采用广播的方式发送，如果不是,就采用路由的方式（向不同广播域／子网分发数据包），mac地址是无法区分的，它只跟厂商有关

**网络层功能**：引入一套新的地址用来区分不同的广播域／子网，这套地址即网络地址

## IP协议
目的：划分广播域
数据头包含原地址和目标地址（IP地址）

一个ip地址通常写成四段十进制数，例：172.16.10.1

ip地址分成两部分

网络部分：标识子网
主机部分：标识主机
注意：单纯的ip地址段只是标识了**ip地址的种类**，从网络部分或主机部分都无法辨识一个ip所处的子网

例：172.16.10.1与172.16.10.2并不能确定二者处于同一子网

ipv4地址:
8bit.8bit.8bit.8bit
255.255.255.255
规模太小，不够用

子网掩码：
8bit.8bit.8bit.8bit

所谓”子网掩码”，就是表示子网络特征的一个参数。它在形式上等同于IP地址，也是一个32位二进制数字，它的网络部分全部为1，主机部分全部为0。比如，IP地址172.16.10.1，如果已知网络部分是前24位，主机部分是后8位，那么子网络掩码就是11111111.11111111.11111111.00000000，写成十进制就是255.255.255.0。

一个合法的ipv4地址=ip地址/子网掩码地址

总结一下，IP协议的作用主要有两个，一个是为每一台计算机分配IP地址，另一个是确定哪些地址在同一个子网络

计算机A

ip地址：172.16.10.1
子网掩码：255.255.255.0
ipv4网络  地址：172.16.10.0

## ip数据包

ip数据包也分为head和data部分，无须为ip包定义单独的栏位，直接放入以太网包的data部分

head：长度为20到60字节

data：最长为65,515字节。

而以太网数据包的”数据”部分，最长只有1500字节。因此，如果IP数据包超过了1500字节，它就需要分割成几个以太网数据包，分开发送了。

## ARP协议
 
前提：每台主机ip都是已知的

首先通过ip地址和子网掩码区分出自己所处的子网，不同子网就用网关的mac

分析172.16.10.10/24与172.16.10.11/24处于同一网络(如果不是同一网络，那么目标ip为172.16.10.1,通过arp获取的是网关的mac)

## 端口

port：每个基于网络服务的应用都需要占用端口号
ip+port：标记独一无二的网络应用程序

# 传输层

##